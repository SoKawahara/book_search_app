<% provide(:title , @user.name) %>
    <section class="profile">
        <%= image_tag gravatar_for(@user) , class: "gravatar-img" %>
        <div class = "user-info">
            <h3 class="account-name">
                <%= @user.name %>
            </h3>
            <ul class="account-info">
                <li>
                    <p>フォロー</p>
                    <p>0</p>
                </li>
                <li>
                    <p>フォロワー</p>
                    <p>0</p>
                </li>
                <li>
                    <p>投稿</p>
                    <p>0</p>
                </li>
                <li><%= image_tag("setting.svg" , class: "setting-icon" , style: "margin-left: 1rem") if current_user == @user %></li>
            </ul>
        </div>
        
        
        <ul class = "setting-container" > 
            <li><%= link_to "プロフィール変更" , edit_user_path(@user) %></li>
            <li><%= link_to "ユーザ一覧" , users_path %></li>
            <li><%= link_to "ログアウト" , logout_path, data: { "turbo-method": :delete } %></li>
            <li><%= link_to "アカウント切り替え" , logout_path, data: { "turbo-method": :delete } %></li>
            <li><%= image_tag("close-btn.svg" , class: "close-icon" ) %></li>
        </ul>

        <% if current_user.admin?  && !current_user?(@user) %>
          <%= link_to "このユーザを削除する" , user_path(@user) , class: "detele-user" , data: { "turbo-method": :delete , turbo_confirm: "本当に削除しますか?" } %>
        <% end %>
        
        
    </section>
    <div class = "border"></div>
    <!-- ここにユーザの投稿一覧を表示する -->
    <h1 class = "new-title">投稿一覧</h1>
    <section class = "posts-container">
        <% @posts.each do |item| %>
            <section class="post-container">
              <%= image_tag(eval(item.book_data)["imageLink"]) %>
              <div class="content">
                <!-- 感想をdata属性としてタグの中に含ませておく -->
                <p class = "post-name" data-post-content = <%= item.content %> data-post-id = <%= item.id %>><%= item.post_name %></p>
                <!-- gsubメソッドを用いることで第１引数の値を第２引数の値で置き換えることができる -->
                <p>作成日時:<%= (item.created_at.getlocal("+09:00")).to_s.gsub("+0900" , "") %></p>
              </div>
              <p class = "good-content"><%= image_tag "good.svg" , class: "good-img" %><%=item.good_count%></p>
              <% if current_user?(@user) %>
                <%= link_to image_tag("edit.svg") , "/posts/edit/#{item.id}" , class: "edit-btn" %>
              <% end %>
            </section>
        <% end %>
    </section>
    <%= paginate @posts, theme: "bootstrap-5" %>
    <div class="modal"></div>

    <template id = "modal-post">
        <section class = "modal-post-container">
            <%= image_tag("close-btn.svg") %>
            <section class = "modal-section">
                <label for="content">感想:</label>
                <p id = "content"></p>
                <%= link_to "この本の詳細ページへ" , '#' %>
            </section>
            <a href="" class = "modal-a">♥</a>
            <% if current_user?(@user) %>
              <%= link_to "この投稿を削除する" , "#" , data: { "turbo-method": :delete , turbo_confirm: "この投稿を本当に削除しますか?"} , class: "modal-delete-btn"%>
            <% end %>
        </section>

    </template>